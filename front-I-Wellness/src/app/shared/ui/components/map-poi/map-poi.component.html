<div class="map-poi-container">
  <div class="map-layout-column">

    <!-- Nombre del proveedor activo arriba del mapa -->
    <div class="provider-name-header" *ngIf="showCarousel && providerItems.length > 0">
      <h3 class="provider-name">{{ activeProviderName }}</h3>
      <span class="provider-counter" *ngIf="providerItems.length > 1">
        {{ activeProviderIndex + 1 }} de {{ providerItems.length }}
      </span>
    </div>

    <!-- Mapa -->
    <div class="map-container full">
      <div [id]="mapId" class="map-leaflet-wrapper"></div>
    </div>

    <!-- Solo navegaciÃ³n del carousel debajo del mapa -->
    <div class="carousel-navigation-only" *ngIf="showCarousel && providerItems.length > 1">
      <button
        class="nav-btn prev-btn"
        (click)="goToPreviousProvider()"
        [disabled]="activeProviderIndex <= 0">
        &#10094;
      </button>

      <div class="dots-container">
        <button
          title="Ir al proveedor {{ i + 1 }}"
          type="button"
          *ngFor="let item of providerItems; let i = index"
          class="nav-dot"
          [class.active]="i === activeProviderIndex"
          (click)="goToProviderIndex(i)"
          [title]="item.data?.nombre_empresa || 'Proveedor ' + (i + 1)">
        </button>
      </div>

      <button
        class="nav-btn next-btn"
        (click)="goToNextProvider()"
        [disabled]="activeProviderIndex >= providerItems.length - 1">
        &#10095;
      </button>
    </div>
  </div>

  <!-- Provider Card -->
  <app-provider-card
    *ngIf="showProviderCard && showProviderCardVisible"
    class="provider-card-wrapper"
    [@slideIn]="showProviderCardVisible ? 'visible' : 'hidden'"
    [placeData]="placeData"
    [reviews]="reviews"
    [services]="services"
    (submitReview)="onSubmitReview($event)">
  </app-provider-card>
</div>
